<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>My Todos</title>
</head>
<body>
    <h1>My Private Todos</h1>
    <button onclick="showTaks()">show todo</button>
    <button onclick="logout()">Logout</button>
    
    <ul id="todoList"></ul>

    <script>
        async function showTaks() {

            const token = localStorage.getItem("token");


            if (!token) {
                window.location.href = "index.html";
                return;
            }


            const response = await fetch("http://localhost:8000/todos", {
                method: "GET",
                headers: {

                    "Authorization": `Bearer ${token}` 
                }
            });

            const data = await response.json();
            

            const list = document.getElementById("todoList");
            

            list.innerHTML = ""; 


            data.tasks.forEach(task => {
                const item = document.createElement("li");
                item.innerText = task.title; 
                list.appendChild(item);
            });
        }


        function logout() {
            localStorage.removeItem("token");
            window.location.href = "index.html";
        }
    </script>
</body>
</html>